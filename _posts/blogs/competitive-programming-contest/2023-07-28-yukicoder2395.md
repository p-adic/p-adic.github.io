---
layout: 404
title: 区間二次変換一点取得
order: D
difficulty: ★★★
date: 2023-07-28
blog-class: yukicoder-contest-399
aname: yukicoder2395
num: 2395
tester: ecotteaさん、hiro1729さん（C・D全体tester）
tags: [競技プログラミング,数学]
---

<p>
線形代数と代数、特に群論とモノイド論です。線形変換が行列に翻訳できることは有名で、アフィン変換も$1$（変数の$0$乗）を巧みに使うことで行列に翻訳できることも競技プログラミングではよく話題に出る知識だと思います。同様により一般の多項式による変換も変数の冪乗を必要なだけ全部持てば行列に翻訳できる、というところまで来ると有名知識とはいえ★2.5～3ではあまり目にすることがないテクニックかもしれません。
</p>
<p>
この問題は一見高次の変換を翻訳しなければいけないように見えて、★2.5～3の知識の範囲で解けるようにクエリを工夫して一次変換と軽めの処理の組み合わせで記述できるようにしてあります。クエリをデータ構造でさばくためにクエリの代数的な翻訳ができるかを問いました。
</p>
<p>
この問題の難易度評価は色々悩ましかったです。作問当初は解説に記載したtester解を元々は気づいておらず、★2.5では非典型でありかつやや重実装かと思い難易度を高めに見積もって★3としていました。しかしひとたびシンプルなtester解を教わってみるとコンテスト参加者にとってはtester解の方が自然に思いつくものだろうと考え、testerさんの難易度評価に合わせて★2.5に変更しました。それでも★2.5～3の難易度評価は慎重に行いたいと思って募集していたC・Dの全体testerさんに改めてCよりだいぶ難しく★3～3.5相当ではないかと評価していただいたので、再びtesterさんとご相談し★3に戻しました。この辺は自分だけで考えても不安が募るばかりなので、testerさんと全体testerさんの２人に体感を教えていただけて本当に助かりました。
</p>
<p>
本番でのAC数は１時間経過時点で問題順を差し引いてもC問題より有意に落ちていました。最終的にはAC数の差が縮まりましたが、コンテスト時間がながければ差が縮まるモオだと思いますので、結果的に★3にして正解だったようです。なお解説の余談にも書かれていますが$5$次正方行列を直接扱うとTLEしやすく、言語間の不平等がなるべくないように早い言語でもTLEしてくれればと思っていました。実際に早い言語でTLEしている提出も見かけたので、TLがちょうどいい塩梅に設定できているようで一安心です。
</p>
